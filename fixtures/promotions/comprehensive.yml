# Comprehensive promotion set covering all promotion types
# Tests direct_discount, positional_discount, mix_and_match, and tiered_threshold

root: all

nodes:
  all:
    promotions:
      [produce_discount, bakery_three_for_two, breakfast_bundle, snack_tiered_threshold]
    output: pass-through

promotions:
  # Promotion 1: direct_discount with percentage_off
  produce_discount:
    name: "15% Off Fresh Produce (up to 3 items)"
    type: direct_discount
    tags: [produce]
    budget:
      applications: 3
    discount:
      type: percentage_off
      amount: 15%

  # Promotion 2: positional_discount (3-for-2 on bakery)
  bakery_three_for_two:
    name: "3-for-2 on Bakery Items"
    type: positional_discount
    tags: [bakery]
    size: 3
    positions: [2]
    discount:
      type: percentage_off
      amount: 100%

  # Promotion 3: mix_and_match with fixed_total (Breakfast Bundle)
  breakfast_bundle:
    type: mix_and_match
    name: "Breakfast Bundle £5"
    slots:
      - name: dairy
        tags: [dairy]
        min: 1
        max: 1
      - name: bakery
        tags: [bakery]
        min: 1
        max: 1
      - name: beverage
        tags: [beverage]
        min: 1
        max: 1
    discount:
      type: fixed_total
      amount: 5.00 GBP

  # Promotion 4: tiered_threshold on snacks
  snack_tiered_threshold:
    type: tiered_threshold
    name: "Snack Saver: 20% Off at £3+"
    tiers:
      - lower_threshold:
          monetary: 3.00 GBP
        contribution_tags: [snack]
        discount_tags: [snack]
        discount:
          type: percent_each_item
          amount: 20%
